(self.webpackChunkaccess_aliyun_ai_assistant=self.webpackChunkaccess_aliyun_ai_assistant||[]).push([[57],{2364(){},4133(e,t,n){"use strict";var r=n(7215),a=n(8822),o=n(2213),i=n(4420),s=n(775),c=function Send(e){var t=e.color,n=void 0===t?"#FFFFFF":t;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",version:"1.1",width:"14.41552734375",height:"14.4000244140625",viewBox:"0 0 14.41552734375 14.4000244140625",children:(0,s.jsx)("g",{children:(0,s.jsxs)("g",{children:[(0,s.jsx)("g",{children:(0,s.jsx)("path",{d:"M13.7083,0L0,4.80247L0,4.81819L0,5.86691L5.21493,9.19617L8.54419,14.4L9.61788,14.4L14.4157,0.706544L13.7083,0ZM8.94185,12.9703L6.08423,8.4998L5.9187,8.33056L1.44453,5.47294L12.9869,1.42881L8.94185,12.9703Z",fill:n,fillOpacity:"1"})}),(0,s.jsx)("g",{transform:"matrix(0.7071067690849304,-0.7071067690849304,0.7071067690849304,0.7071067690849304,-4.414281602072151,6.157068042437459)",children:(0,s.jsx)("rect",{x:"5.22509765625",y:"8.40704345703125",width:"11.444351196289062",height:"1.1097553968429565",rx:"0",fill:n,fillOpacity:"1"})})]})})})},l=function Arrow(e){var t=e.color,n=void 0===t?"#FFFFFF":t;return(0,s.jsx)("svg",{width:"13.33px",height:"12px",viewBox:"0 0 14 12",version:"1.1",children:(0,s.jsx)("g",{id:"",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,s.jsx)("g",{id:"qs",transform:"translate(-1557.000000, -667.000000)",fill:n,children:(0,s.jsxs)("g",{id:"=",transform:"translate(1557.000000, 667.000000)",children:[(0,s.jsx)("polygon",{id:"Fill-1",points:"7.33263622 11.8952599 6.38975315 10.9523768 11.3418707 6.00025926 6.38923463 1.04769724 7.3321177 0.104740094 13.2276369 6.00025926"}),(0,s.jsx)("path",{d:"M6.28449454,1.04769724 L11.2370566,6.00025926 L6.28493898,10.9523768 L7.33263622,12 L13.332377,6.00025926 L7.3321177,0 L6.28449454,1.04769724 Z M6.49449324,10.9523768 L11.4465367,6.00025926 L6.49397473,1.04769724 L7.3321177,0.209480188 L13.1228968,6.00025926 L7.33263622,11.7905198 L6.49449324,10.9523768 Z",id:"Fill-2"}),(0,s.jsx)("polygon",{id:"Fill-3",points:"0.0740736168 6.66702551 12.0951846 6.66702551 12.0951846 5.33355226 0.0740736168 5.33355226"}),(0,s.jsx)("path",{d:"M0,6.74102506 L12.1692582,6.74102506 L12.1692582,5.25940457 L0,5.25940457 L0,6.74102506 Z M0.148147234,6.5929519 L12.021111,6.5929519 L12.021111,5.40762588 L0.148147234,5.40762588 L0.148147234,6.5929519 Z",id:"Fill-4"})]})})})})},u=function CloseImg(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",version:"1.1",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,s.jsx)("g",{children:(0,s.jsxs)("g",{transform:"matrix(0.7071067690849304,0.7071067690849304,-0.7071067690849304,0.7071067690849304,3.514718770980835,-8.485281229019165)",children:[(0,s.jsx)("g",{children:(0,s.jsx)("rect",{x:"19.986146926879883",y:"0",width:"1.1979221105575562",height:"16.970561981201172",rx:"0",fill:"#D8D8D8",fillOpacity:"1"})}),(0,s.jsx)("g",{transform:"matrix(0,1,-1,0,36.956708908081055,-20.98441505432129)",children:(0,s.jsx)("rect",{x:"28.970561981201172",y:"7.986146926879883",width:"1.1979221105575562",height:"16.970561981201172",rx:"0",fill:"#D8D8D8",fillOpacity:"1"})})]})})})},d=n(2154);const h=function SearchIconLottie(e){var t=e.status,n=e.width,a=(0,r.useRef)(null);return(0,r.useEffect)(function(){a.current&&a.current.handleClick(t)},[a,t]),(0,s.jsx)(d.Du,{width:n||30,ref:a,json:d.w4,type:"input",lottieid:"aiSearchNavlottie"})};var f=n(4817),v=n(6721),p=n(3298),m=n(2712),w=n(3894),g=n(324),A=n(2130);function covertBody(e,t){return"multipart/form-data"===t?Object.entries(e).reduce(function(e,t){var n=(0,o.A)(t,2),r=n[0],a=n[1];return e.append(r,a)},new FormData):JSON.stringify(e)}var x=(0,A.A)("options"),y=(0,A.A)("handles"),j=(0,A.A)("getBody"),L=(0,A.A)("attachHeaders"),b=(0,A.A)("merge"),_=(0,A.A)("fetch"),k=function(){return(0,w.A)(function Fetcher(e,t,n){(0,m.A)(this,Fetcher),Object.defineProperty(this,_,{value:_fetch2}),Object.defineProperty(this,b,{value:_merge2}),Object.defineProperty(this,L,{value:_attachHeaders2}),Object.defineProperty(this,x,{writable:!0,value:null}),Object.defineProperty(this,y,{writable:!0,value:null}),Object.defineProperty(this,j,{writable:!0,value:null}),(0,g.A)(this,x)[x]=(0,i.A)({headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"},e),(0,g.A)(this,j)[j]=n||covertBody,(0,g.A)(this,y)[y]=t||[function(e){return e.json()}]},[{key:"fetch",value:function(){var e=(0,p.A)((0,v.A)().m(function _callee(e,t,n){return(0,v.A)().w(function(r){for(;;)if(0===r.n)return r.a(2,(0,g.A)(this,_)[_](e,t,n))},_callee,this)}));return function fetch(t,n,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,p.A)((0,v.A)().m(function _callee2(e,t,n){var r;return(0,v.A)().w(function(a){for(;;)if(0===a.n)return r=(0,g.A)(this,L)[L]((0,i.A)({method:"GET"},t)),a.a(2,(0,g.A)(this,_)[_](e,r,n))},_callee2,this)}));return function get(t,n,r){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=(0,p.A)((0,v.A)().m(function _callee3(e,t,n,r){return(0,v.A)().w(function(a){for(;;)if(0===a.n)return a.a(2,(0,g.A)(this,_)[_](e,(0,g.A)(this,b)[b]("POST",t,n),r))},_callee3,this)}));return function post(t,n,r,a){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=(0,p.A)((0,v.A)().m(function _callee4(e,t,n,r){return(0,v.A)().w(function(a){for(;;)if(0===a.n)return a.a(2,(0,g.A)(this,_)[_](e,(0,g.A)(this,b)[b]("PUT",t,n),r))},_callee4,this)}));return function put(t,n,r,a){return e.apply(this,arguments)}}()}])}();function _attachHeaders2(e){var t=Object.assign((0,g.A)(this,x)[x].headers,e.headers);return(0,i.A)((0,i.A)((0,i.A)({},(0,g.A)(this,x)[x]),e),{},{headers:t})}function _merge2(e,t,n){var r=(0,g.A)(this,L)[L]((0,i.A)({method:e},n)),a=(0,g.A)(this,j)[j](t,r.headers["Content-Type"]);return Object.assign(r,{body:a})}function _fetch2(e,t,n){return _fetch4.apply(this,arguments)}function _fetch4(){return _fetch4=(0,p.A)((0,v.A)().m(function _callee5(e,t,n){var r;return(0,v.A)().w(function(a){for(;;)if(0===a.n)return r=[].concat(n||(0,g.A)(this,y)[y]),a.a(2,r.reduce(function(e,t){return e.then(t)},fetch(e,t)))},_callee5,this)})),_fetch4.apply(this,arguments)}var S="HAMMER_GLOBAL_MESSAGE_EVENT";const E=new(function(){return(0,w.A)(function _class(){(0,m.A)(this,_class)},[{key:"subscribe",value:function subscribe(e,t){window.addEventListener(S,e,t)}},{key:"unsubscribe",value:function unsubscribe(e,t){window.removeEventListener(S,e,t)}},{key:"distribute",value:function distribute(e,t){window.dispatchEvent(new CustomEvent(S,(0,i.A)({detail:e},t)))}}])}());window.kloud||(window.kloud={});var N=function site(){var site=window.kloud.site||"intl";return window.kloud.getSite&&(site=window.kloud.getSite()),site},D=function getCurrentLang(){return window.kloud.lang||"en"};function getParentModuleId(){var e=document.getElementById("ai-multiple-rounds-search");if(!e)return!1;var t=getParentModule(e);return!(!t||"BODY"===t.tagName)&&(t.getAttribute("data-module-id")||t.getAttribute("data-spm"))}function getParentModule(e){if(!e)return!1;var t=e.parentNode;return!(!t||"BODY"===t.tagName)&&(t.getAttribute("data-module-id")||t.getAttribute("data-source-id")&&t.getAttribute("data-spm")?t:getParentModule(t))}function _renovateToken(){return(_renovateToken=(0,p.A)((0,v.A)().m(function _callee(e){var t,n,r,a,o;return(0,v.A)().w(function(i){for(;;)switch(i.n){case 0:if(401===e.status){i.n=3;break}return i.n=1,e.json();case 1:if((t=i.v).success||"ops.workbench.notLogin"!==t.resultCode){i.n=2;break}return window.open("https://everest.aliyun-inc.com/","_blank"),i.a(2);case 2:return i.a(2,t);case 3:n=window.location,r=n.pathname,a=n.origin,o="".concat(a,"/sendBucSSOToken.do?redirect=").concat(r),window.location.assign("https://login.alibaba-inc.com/ssoLogin.htm?APP_NAME=homon&CLIENT_VERSION=0.3.7&CONTEXT_PATH=%2F&BACK_URL=".concat(o));case 4:return i.a(2)}},_callee)}))).apply(this,arguments)}function handle(e){e.data;var t=e.resultCode,n=e.resultMsg,r=!e.success&&n;if(!r)return e;throw E.distribute(t||r),{code:t,error:r}}window.addEventListener("unhandledrejection",function(e){var t=e.reason;E.distribute(t),e.preventDefault()},!1);const I=new k({},[function renovateToken(e){return _renovateToken.apply(this,arguments)},handle]);var O=n(1411),M=n.n(O);const F=function Search(e){var t=e.handleKeyDown,n=e.pressEnter,a=e.placeHolder,i=e.clear,l=e.value,u=e.setValue,d=e.setProductsList,v=e.setSolutionList,p=e.noRes,m=e.onSearchUseValue,w=(0,r.useState)("normal"),g=(0,o.A)(w,2),A=g[0],x=g[1],y=(0,r.useRef)();(0,r.useEffect)(function(){y.current&&y.current.focus()},[y.current]);var j=function throttle(e,t){var n=null;return function(){var r=this,a=arguments;clearTimeout(n),(n=null)||(n=setTimeout(function(){e.apply(r,a),n=null},t))}}(function handleAiSearchData(){if(!l)return;(function startSearch(e){return I.get("".concat("https://resources.alibabacloud.com","/api/search/suggest_all?").concat(M().stringify(e)))})({site:N(),language:D(),keyword:l}).then(function(e){var t=e.success,n=e.data,r=void 0===n?{}:n,a=r.product,o=void 0===a?[]:a,i=r.solution,s=void 0===i?[]:i;t&&r&&(0!==o.length||0!==s.length)?(d(o||[]),v(s||[])):p&&p()}).catch(function(e){p&&p(),console.log("err",e)})},300);return(0,s.jsx)("div",{className:"ai-search-wrap-border ".concat(l?"active":"normal"),children:(0,s.jsxs)("div",{className:"ai-search-wrap",children:[(0,s.jsx)("div",{className:"search-icon",children:(0,s.jsx)(h,{status:A})}),(0,s.jsx)(f.A.TextArea,{ref:y,id:"header-ai-search-input",className:"header-ai-search-input",placeholder:a,rows:1,autoSize:{minRows:1,maxRows:5},bordered:!1,value:l,onChange:function onChange(e){x(e.target.value?"active":"normal"),u(e.target.value)},onKeyUp:function onKeyUp(e){"ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"ArrowRight"!==e.key&&"ArrowLeft"!==e.key&&j()},onPressEnter:n,onKeyDown:function onKeyDown(e){return t(e)},onFocus:function onFocus(){x("focus")}}),(0,s.jsx)("div",{className:"operations-box",children:(0,s.jsxs)("div",{className:"operations",children:[l&&(0,s.jsx)("span",{className:"operation-clear",onClick:function clearValue(){u(""),x("normal")},children:i}),(0,s.jsx)("div",{className:"operation-enter ".concat(l?"active":"normal"),onClick:m,"data-muninn-peg":"new_search_get_result",children:(0,s.jsx)(c,{})})]})})]})})};const P=function RenderLi(e){var t=e.title,n=e.list,r=e.length,a=e.className,o=e.startIndex,i=e.selectedIndex,c=e.mouseEnterItem,u=e.mouseLeaveItem;return n&&0!==n.length?(0,s.jsxs)("div",{className:"item",children:[(0,s.jsx)("div",{className:"title",children:t}),(0,s.jsx)("div",{className:"text-sm",children:n.slice(0,r).map(function(e,t){return(0,s.jsxs)("a",{href:e.url,className:"".concat(a," list").concat(o+t," ").concat(i===o+t?"selected":""),onMouseEnter:function onMouseEnter(e){return c(e)},onMouseLeave:function onMouseLeave(e){return u(e)},"data-index":o+t,children:[(0,s.jsx)("p",{dangerouslySetInnerHTML:{__html:e.suggestion_content||e.text}}),(0,s.jsx)(l,{})]},t)})})]}):""};const C=function Dropdown(e){var t=e.contentData,n=e.closeAll,a=(t||{}).dropdownData,c=(void 0===a?{}:a)||{},l=c.placeHolderSearch,d=c.clear,h=c.productText,f=c.productHotLists,v=void 0===f?[]:f,p=c.solutionText,m=c.solutionHotLists,w=void 0===m?[]:m,g=(0,r.useState)(v),A=(0,o.A)(g,2),x=A[0],y=A[1],j=(0,r.useState)(w),L=(0,o.A)(j,2),b=L[0],_=L[1],k=(0,r.useState)(""),S=(0,o.A)(k,2),E=S[0],N=S[1],O=(0,r.useState)(-1),M=(0,o.A)(O,2),C=M[0],T=M[1],B=(0,r.useRef)(null),R=(0,r.useState)({}),H=(0,o.A)(R,2),K=H[0],U=H[1];(0,r.useEffect)(function(){var e=function getSpmId(){var e=document.querySelectorAll('meta[name="spm-id"]');e&&e.length<1&&(e=document.querySelectorAll('meta[name="data-spm"]'));var t=document.body.getAttribute("data-spm"),n="";return e&&e.length>0&&(n=e[0].getAttribute("content")),{spmA:n,spmB:t}}(),t=getParentModuleId();U({site:"intl",resourceId:"".concat(e.spmB,".").concat(t,".new_search_get_result"),currentUrl:window.location.href,pageSpm:"".concat(e.spmA,".").concat(e.spmB),ext1:t})},[]);var q=function onSearch(){if(console.log("onSearch",E),!E)return!1;window.location.href="https://www.alibabacloud.com/search/list?k=".concat(E,"&scene=all")},V=function transferSartIndex(e){return"pro"===e?0:"sol"===e?x.slice(0,3).length:void 0},Z=function mouseEnterItem(e){e.stopPropagation();var t=1*e.target.dataset.index;T(t)},G=function mouseLeaveItem(e){e.stopPropagation(),T(-1)},W=function closeDropdwon(e){e.stopPropagation();var t=document.querySelector(".hmod-alicloud-homon-nav-v3 .ai-search.open");t&&!function isCurrentlyMobile(){return window.innerWidth<=1200}()&&t.classList.remove("open"),n&&n()};return(0,s.jsx)("div",{className:"ai-search-dropdown-box",children:(0,s.jsx)("div",{className:"nav-ai-search-dropdown",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"nav-ai-search-dropdown-content",children:[(0,s.jsx)(F,{handleKeyDown:function handleKeyDown(e){var t=-1,n=B.current&&B.current.querySelectorAll(".item-sel")?B.current.querySelectorAll(".item-sel "):[];switch(e.key){case"ArrowUp":if(!n||0===n.length)return;t=C>=0?C-1:C;break;case"ArrowDown":if(!n||0===n.length)return;t=C<n.length-1?C+1:C;break;case"ArrowRight":if(!n||0===n.length)return;if(n.length<4)return;t=3;break;case"ArrowLeft":if(!n||0===n.length)return;if(n.length<4)return;t=0;break;default:return}T(t)},pressEnter:function pressEnter(e){e.shiftKey||(e.preventDefault(),C>-1?function onSearchUseKeyWords(){if(B.current){var e=B.current.querySelector(".selected");e&&(window.location.href=e.href||e.dataset.url)}}():(!function behaviorEvent(e){return I.post("https://auxiliary.alibabacloud.com/api/log/click/homonModule",e)}((0,i.A)((0,i.A)({},K),{},{language:D()})),q&&q()))},placeHolder:l,clear:d,value:E,setValue:N,setProductsList:y,setSolutionList:_,noRes:function noRes(){y(v||[]),_(w||[])},onSearchUseValue:q}),(0,s.jsxs)("div",{className:"search-res-default-wrap",ref:B,children:[x&&x.length>0&&(0,s.jsx)(P,{title:h,list:x,length:3,className:"item-sel",startIndex:V("pro"),selectedIndex:C,mouseEnterItem:Z,mouseLeaveItem:G}),b&&b.length>0&&(0,s.jsx)(P,{title:p,list:b,length:3,className:"item-sel",startIndex:V("sol"),selectedIndex:C,mouseEnterItem:Z,mouseLeaveItem:G})]})]}),(0,s.jsx)("div",{className:"close-img",onClick:function onClick(e){return W(e)},children:(0,s.jsx)(u,{})})]})})})};var T="event_start_dropdown",B="event_close_dropdown";const R=function App(e){var t=e.contentData,n=(0,r.useState)(!1),a=(0,o.A)(n,2),i=a[0],c=a[1];(0,r.useEffect)(function(){return window.addEventListener(T,l),window.addEventListener(B,u),function(){window.removeEventListener(T,l),window.removeEventListener(B,u)}},[]);var l=function startDropdown(){c(!0)},u=function closeDropdown(){c(!1)};return(0,s.jsxs)("div",{className:"access-aliyun-ai-box",children:[i&&(0,s.jsx)("div",{className:"ai-search-dropdown-mask",onClick:u}),i&&(0,s.jsx)(C,{contentData:t,closeAll:u})]})};var H=document.getElementById("ai-multiple-rounds-search"),K=(0,a.H)(H),U={};if(H)try{U=JSON.parse(H.dataset.aisearch||"{}")}catch(e){console.error(e)}K.render((0,s.jsx)(R,{contentData:U}))}},e=>{e.O(0,[121],()=>{return t=4133,e(e.s=t);var t});e.O()}]);