/* HouseHold LegacyMode */
(()=>{var Ue=Object.defineProperty,Pt=Object.defineProperties,wt=Object.getOwnPropertyDescriptor,Ot=Object.getOwnPropertyDescriptors;var rt=Object.getOwnPropertySymbols;var Ut=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable;var Oe=(n,e,t)=>e in n?Ue(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_=(n,e)=>{for(var t in e||(e={}))Ut.call(e,t)&&Oe(n,t,e[t]);if(rt)for(var t of rt(e))Yt.call(e,t)&&Oe(n,t,e[t]);return n},ee=(n,e)=>Pt(n,Ot(e)),o=(n,e)=>Ue(n,"name",{value:e,configurable:!0});var d=(n,e,t,r)=>{for(var s=r>1?void 0:r?wt(e,t):e,i=n.length-1,a;i>=0;i--)(a=n[i])&&(s=(r?a(e,t,s):a(s))||s);return r&&s&&Ue(e,t,s),s};var l=(n,e,t)=>Oe(n,typeof e!="symbol"?e+"":e,t);var y=(n,e,t)=>new Promise((r,s)=>{var i=p=>{try{u(t.next(p))}catch(f){s(f)}},a=p=>{try{u(t.throw(p))}catch(f){s(f)}},u=p=>p.done?r(p.value):Promise.resolve(p.value).then(i,a);u((t=t.apply(n,e)).next())});var c={modules:["SignalsIds","SignalsBsc","SignalsVlp","SignalsTvp","LegacyLayer","CustomSignals","GptSignals","SignalsAbs","GptMeasurement","PLEMetrics","SignalsCbs","SignalsCct"],configs:{RFYxMTU3NzY0:[0,1,2,3,4,5,6],RFYxNzY0NDcw:[0,1,4,5,6,7],RFYxMDcxNDY3:[0,1,2,3,4,5,6,7],RFYxMzIzOTIy:[0,1,2,3,4,5,6,7],"RFY0NjQwMzM=":[0,1,2,4,5,6],RFYxMzM5NzYy:[0,1,2,3,4,5],RFYxNDQ2MDE5:[0,1,2,3,4,5,6,7,8,9],"RFY5NzQ3MzA=":[0,1,2,3,4,5],RFYyMDU3OTM0:[0,1,2,3,4,5,7],RFYxNDc1MjY4:[4,5,6,7,8],"RFY0NjQwMjE=":[0,1,2,3,4,5,6,7],RFYxNDczMDg4:[0,1,2,3,4,5,6,8],"RFY2NzI1MjE=":[0,1,2,3,4,5,6],RFYxNDg0Mzcw:[0,1,2,3,4,5,6,7,8,9],RFYxMzk3OTY1:[],RFYxNDgxOTIx:[0,1,2,3,4,5,6,7,8],"RFY1ODc0MTQ=":[0,1,2,3,4,5,6,7,9],RFYxMzExMDk0:[0,1,2,3,4,5,6,7,9],"RFY4MDU2MDE=":[0,2,3,4,5],RFYyMDU5OTU1:[0,1,2,3,4,5,6,7,8],RFYxOTQwMTU4:[0,1,2,3,4,5,6,7,8,9],RFYxNDYyNzYz:[0,1,4,5,6,7,8],RFYyMDc5OTM4:[8,9],RFYxNzg0NzUw:[0,1,2,3,4,5,6,8,9],"RFY3OTI4NTU=":[0,2,4,5,6],RFYxMzM5NzY5:[0,1,2,3,4,5,6,7,8],"RFY2NzM2NzI=":[0,1,10,2,3,4,5,6,7],RFYxMjc5MjEw:[0,1,2,3,4,5,6,7,8,9],RFYxNDcxMjQy:[0,1,2,3,4,5,6,7,8],"RFY5NzQ3MzE=":[0,1,2,3,4,5],RFYxMTEwOTk0:[0,1,2,3,4,5,6,7],RFYxMjkzODQ1:[0,1,2,4,5,6,7,8,9],"RFY5NzQ3MzI=":[],"RFY2NDcwODg=":[0,1,2,3,4,5,6],"RFY4MzIzNTM=":[0,1,4,5,6],RFYxMzMxNjkz:[0,1,2,3,4,5,6,8],RFYxMjk4NzIy:[0,1,2,3,4,5,6,7,8,9],RFYxMTg3NDkx:[0,1,2,3,4,5,6],"RFYzMTIwNDg=":[0,1,2,4,5,6],RFYxMzA3Mzc3:[0,1,2,3,4,5,6,7],RFYxMDExNDU1:[0,1,2,3,4,5,6,7,8,9],RFYxODA0NDAy:[0,1,2,3,4,5,6,9],RFYxNDIyMTQ1:[0,1,4,5,6,7,9],"RFY5Nzg2NjI=":[],RFYxNTIyMDY2:[8],"RFY4MDkxOTk=":[0,1,2,3,4,5,6],RFYxOTkzNDkz:[0,1,4,5,6],RFYxODcxNjg5:[0,1,2,3,4,5,6,7,8],RFYxNDI4ODMy:[0,1,2,3,4,5,6,7,8],RFYxMjA4ODI5:[0,1,2,3,4,5,6,7],"RFY3MTA4Nzg=":[0,1,2,3,4,5,6],RFYxNDE0MzUz:[0,1,2,3,4,5,6],RFYxMzk2MzM4:[1,2,3,4,5,6,8],RFYxMzIzODg3:[0,2,4,5,6,8,9],RFYxODE1NDQ5:[0,1,2,3,4,5,6,7,8,9],RFYxNDgzMzY5:[0,1,2,3,4,5,6,7],RFYxMzkwOTY5:[0,1,2,3,4,5,6,7,8],RFYxNDg1NjU0:[8],RFYxNTI4MTg3:[0,1,2,3,4,5,6,7,8],"RFY4OTMwNTY=":[0,1,2,4,5],RFYxMDQ0MzMw:[0,1,2,3,4,5,6,7],RFYxNTg4MjM1:[0,1,10,2,3,4,5,6],RFYxNDQ1OTEw:[0,1,2,3,4,5,6,7],"RFY5MDI5MjM=":[0,1,2,3,4,5,6],"RFY2ODQzNDg=":[0,1,10,2,3,4,5,6,7,8],"RFY5MTA2Mzg=":[0,1,4,5],"RFY5NzI5MzU=":[],RFYxNzU5MDU5:[4,5,6,7,8],"RFY3MzQzNDI=":[0,1,2,3,4,5,6,7],"RFY3Nzc4ODU=":[0,1,2,3,4,5,6],RFYxNjYyMjUy:[0,1,4,5,6,8],RFYxMTQwNjg5:[],"RFY3MTg2ODU=":[0,4,5],RFYxNDQ5NjYz:[0,1,2,3,4,5,6,7,8,9],RFYxMzY0NzM5:[0,1,10,2,3,4,5,6,7,8],RFYxNDU0MjMy:[0,1,2,3,4,5,6,7,8],"RFY5NDU5ODg=":[0,1,2,3,4,5,6,7,8],"RFY2NTE3NDQ=":[0,1,2,3,4,5,6,7],RFYxNjM2NDMy:[0,1,2,3,4,5,6,7,8],RFYxNjA1NjQx:[0,1,2,3,4,5,6,7,8],"RFY3NTk1MjA=":[0,1,2,3,4,5,6,7,8],RFYxMDEwNzI4:[0,1,2,3,4,5],RFYxOTg2MjM2:[0,1,2,3,4,5,6],"RFY4NjQ3ODc=":[4,5,6,7],RFYxNzU4Njgx:[0,1,2,3,4,5,6,8,9],RFYxNzE2ODIy:[8],RFYxNDcwMjg3:[],RFYxMTcyOTg1:[0,1,10,2,3,4,5,6,7],RFYxMDIzOTQ1:[4,5,6,7,8],RFYxMTY4NjQ0:[0,1,2,3,4,5,6],RFYxNzUyMjkz:[0,1,2,3,4,5,6],RFYxOTcwNjY1:[0,1,2,3,4,5,6,7],RFYyMDYyMTg1:[0,1,2,3,4,5,6,7,8],RFYxNTU3NDQx:[0,1,2,3,4,5,7],RFYxNTMyNTMx:[0,1,2,3,4,5,6,7,8,9],RFYxNzA1OTc2:[0,1,2,3,4,5,6,7,9],RFYxMTA2MDA5:[0,1,4,5,6,7,8,9],"RFYxMTExMTE=":[0,1,2,3,4,5,6],RFYxNDcyMjYy:[0,1,10,11,2,3,4,5,6,7,8],"RFY4NDY4Mjc=":[0,1,2,3,4,5,6,7,8,9],RFYxOTExNzM0:[0,1,2,3,4,5,6,7],RFYxMzkwOTk3:[0,1,2,3,4,5,6,7,8],RFYxMTA2NjUz:[0,1,2,3,4,5,6,7],RFYxNDUyMzc3:[0,1,2,3,4,5,6,7,8,9],RFYxMDEyNjAw:[4,5,7],RFYxODIzNzI5:[9],RFYxMDM2Nzc2:[0,1,4,5,7],RFYxODA0Nzg4:[0,1,2,3,4,5,6,7],RFYxNDc1MjYy:[0,1,2,3,4,5,6,7,8,9],"RFY3OTc2ODY=":[0,1,2,3,4,5,6,7],RFYxMDAxNjU0:[0,1,2,3,4,5,6,7],"RFY3NDg3MjI=":[0,1,2,3,4,5,6,7],RFYxOTAzNTQ0:[0,1,2,3,4,5,7,9],RFYxMDgwMjEy:[0,1,2,3,4,5,6,7,8,9],RFYxMDI2NTMx:[0,1,2,3,4,5,6,9],RFYxNzEyNTMx:[0,1,2,3,4,5,6,7,8],RFYxMDE2NjU2:[0,1,2,3,4,5,6,7,8],RFYxNjk3NzQ1:[0,1,2,3,4,5,6,7,8,9],RFYxNDc3NTM1:[0,1,10,2,3,4,5,6,7,8,9],RFYxMzg3OTYw:[0,1,2,3,4,5,6,8],"RFY4MjE5MTg=":[0,1,2,3,4,5,6],"RFY2NjkzNjE=":[0,1,2,3,4,5,6],RFYxNTc1Mjkz:[0,1,10,2,3,4,5,6,7,8,9],"RFY0NjQwNDE=":[0,1,2,4,5,6,7,8,9],"RFYzNzQxNTg=":[0,1,2,4,5,6],RFYxMzQ5NzQ2:[0,1,2,3,4,5,6,7,8],RFYxNDQzMjkx:[0,1,2,3,4,5,6,8],"RFY4MzIzNDY=":[0,1,4,5,6],"RFY0MjQ5NDA=":[0,1,2,4,5,6,8,9],RFYxNDEyMDU2:[0,1,2,3,4,5,6,7,8,9],RFYxMTYxMjU5:[],RFYxNDM5Nzcx:[0,1,10,2,3,4,5,6,7],RFYxNTkyNzQ5:[0,1,2,3,4,5,6,7,8],RFYxMjUwMjAy:[0,1,2,3,4,5,6,7],RFYxMzk1MTgy:[0,1,10,2,3,4,5,6,7,9],"RFY0NjUxNTc=":[0,1,2,3,4,5,6,8],RFYxNDkyOTIx:[],RFYxNDc4NzM4:[0,1,2,3,4,5,6,7,8,9],RFYxNTM0MTE4:[4,5,6,7,8],RFYxMjA4OTc5:[0,1,2,3,4,5,6,7,8],RFYxMTQ3ODUx:[0,1,2,3,4,5,6],RFYxNDQ1OTU1:[0,1,10,2,3,4,5,6,7,8,9],RFYxMjAzNDUy:[8],RFYxNzEyMDQw:[0,1,2,3,4,5,6,7,8,9],RFYxNjg3NzU0:[0,1,2,3,4,5,6,7,8],RFYxOTk3NDM4:[0,1,2,3,4,5,7],RFYxMDgzNzg4:[0,1,2,3,4,5,6],"RFYzNzU5MzU=":[0,1,2,4,5,6],RFYxNzEyMDMy:[0,1,2,3,4,5,6,7,8,9],RFYxMzc5MTY2:[0,1,2,3,4,5,6,7,8],"RFY2NzUwMzg=":[0,1,2,3,4,5,6],RFYxMDU4Nzk0:[0,1,2,3,4,5,6],RFYxODIxNzU2:[0,1,2,3,4,5,6,7],RFYxODA0MTQ5:[0,1,2,3,4,5,7]}};var v=[];for(let n=0;n<256;++n)v.push((n+256).toString(16).slice(1));function st(n,e=0){return(v[n[e+0]]+v[n[e+1]]+v[n[e+2]]+v[n[e+3]]+"-"+v[n[e+4]]+v[n[e+5]]+"-"+v[n[e+6]]+v[n[e+7]]+"-"+v[n[e+8]]+v[n[e+9]]+"-"+v[n[e+10]]+v[n[e+11]]+v[n[e+12]]+v[n[e+13]]+v[n[e+14]]+v[n[e+15]]).toLowerCase()}o(st,"unsafeStringify");var Ye,Lt=new Uint8Array(16);function Fe(){if(!Ye){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Ye=crypto.getRandomValues.bind(crypto)}return Ye(Lt)}o(Fe,"rng");var qt=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Le={randomUUID:qt};function zt(n,e,t){var s,i,a;n=n||{};let r=(a=(i=n.random)!=null?i:(s=n.rng)==null?void 0:s.call(n))!=null?a:Fe();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let u=0;u<16;++u)e[t+u]=r[u];return e}return st(r)}o(zt,"_v4");function kt(n,e,t){return Le.randomUUID&&!e&&!n?Le.randomUUID():zt(n,e,t)}o(kt,"v4");var qe=kt;var Y=o(()=>qe(),"uuid");var ue=o((n,e)=>((...t)=>{try{let r=n(...t);return r instanceof Promise?r.then(s=>s,s=>e(s,...t)):r}catch(r){return e(r,...t)}}),"withErrorHandler");var de,ce,ge,L=class L{constructor(e,t){l(this,"collections",new Set);l(this,"children",new L.Set);l(this,"beforeDestroyed");this.beforeDestroyed=t!=null?t:(()=>{});for(let[r,s]of Object.entries(e))Object.defineProperty(this,r,{value:s});e.parent!=null&&(e.parent.destroyed?this.destroy():e.parent.children.add(this))}static Create(e,t){return new L(e,t)}static CreateRoot(e,t){return new L(e,t)}destroy(){if(this.beforeDestroyed!=null){try{this.beforeDestroyed(this)}catch(e){}for(let e of this.children)e.destroy();this.beforeDestroyed=void 0;for(let e of this.collections)e.delete(this)}return this}get destroyed(){return this.beforeDestroyed==null}};o(L,"EntityClass"),l(L,"Set",(de=class extends Set{add(t){return t.destroyed||(t.collections.add(this),super.add(t)),this}delete(t){return t.collections.delete(this),super.delete(t)}clear(){for(let t of this.values())t.collections.delete(this);super.clear()}peek(){return this.values().next().value}conjure(t){let r=this.peek();return r==null&&(r=t(),this.add(r)),r}},o(de,"EntitySet"),de)),l(L,"Map",(ce=class extends Map{set(t,r){return t.destroyed||(t.collections.add(this),super.set(t,r)),this}delete(t){return t.collections.delete(this),super.delete(t)}clear(){for(let t of this.keys())t.collections.delete(this);return super.clear()}summon(t,r){let s=super.get(t);return s==null&&(s=r,this.set(t,s)),s}conjure(t,r){let s=super.get(t);return s==null&&(s=r(),this.set(t,s)),s}},o(ce,"EntityMap"),ce)),l(L,"Link",(ge=class extends L.Map{get(t){return super.conjure(t,()=>new L.Set)}},o(ge,"EntityLink"),ge));var oe=L,S;(i=>(i.Set=oe.Set,i.Map=oe.Map,i.Link=oe.Link,i.Create=oe.Create,i.CreateRoot=oe.CreateRoot))(S||(S={}));var Me=class Me{constructor(e,t,r){l(this,"_message","unknown");l(this,"_trace",[]);l(this,"_silenced",!1);if(e instanceof Me)return e.addToTrace(r,t);typeof e=="object"&&e!=null&&"message"in e&&typeof e.message=="string"?this._message=e.message:this._message=`${e}`,this.addToTrace(r,t)}get message(){return this._message}get trace(){return this._trace}get silenced(){return this._silenced}silence(){return this._silenced=!0,this}addToTrace(e,t){return this._trace.unshift(e),this.maybeCompleteTrace(t),this}maybeCompleteTrace(e){return y(this,null,function*(){let t=this._trace.length;yield Promise.resolve(),yield Promise.resolve(),yield Promise.resolve(),!this.silenced&&t===this._trace.length&&e(this)})}};o(Me,"TracedError");var he=Me;var ze=class ze{constructor(e){l(this,"moduleInstances",new Map);l(this,"methodsToExecute",[]);l(this,"errorHandlers",[]);l(this,"activeSession",null);l(this,"executedMethodIndex",0);this.initializeModules(e)}initializeModules(e){let t=e.map(r=>this.createModule(r));for(let r of t)this.applyModuleDecoration(r),this.applyExecuteDecoration(r),this.applyPluginDecoration(r),this.applyErrorDecoration(r),this.applyCatchErrorDecoration(r)}get session(){if(this.activeSession==null)throw new Error("Core has no active session");return this.activeSession}inject(e){let t=this.modules,r=[];for(let s of e){let i=t[s.name];i==null?r.push(s):this.moduleInstances.set(s,i)}this.initializeModules(r),this.execute()}get(e){return this.getModule(e)}execute(){this.activeSession==null&&(this.activeSession=S.CreateRoot({id:Y()}));for(let e of this.methodsToExecute.slice(this.executedMethodIndex))e();this.executedMethodIndex=this.methodsToExecute.length}reset(){this.activeSession!=null&&(this.activeSession.destroy(),this.activeSession=null,this.executedMethodIndex=0)}get modules(){let e={};for(let[t,r]of this.moduleInstances)e[t.name]=r;return e}getModule(e){let t=this.moduleInstances.get(e);if(t==null)throw new Error(`module not in core: ${e.name}`);return t}createModule(e){if(e.prototype.moduleConfig==null)throw new Error(`not a module: ${e.name}`);let t=new e;return t.core=this,this.moduleInstances.set(e,t),t}applyModuleDecoration(e){var r;let t=e.constructor.prototype.moduleConfig;for(let{method:s}of t)e[s]=ue(e[s].bind(e),(i,...a)=>{throw this.traceError(i,`${e.constructor.name}.${s}(${a.map(u=>typeof u).join(",")})`)});(r=e.plugins)!=null||(e.plugins={}),e.pluginFunctions={};for(let s of Object.keys(e.plugins))e.pluginFunctions[s]=[],e.plugins[s]=(...i)=>{let a=[];for(let u of e.pluginFunctions[s])u(a,...i);return a}}applyExecuteDecoration(e){var r;let t=(r=e.constructor.prototype.executeConfig)!=null?r:[];for(let{method:s}of t)this.methodsToExecute.push(ue(e[s],i=>{this.traceError(i,"@execute")}))}applyPluginDecoration(e){var r;let t=(r=e.constructor.prototype.pluginConfig)!=null?r:[];for(let{PluggableClass:s,category:i,method:a}of t)this.getModule(s).pluginFunctions[i].push(ue((u,...p)=>{u.push(e[a](...p))},u=>{this.traceError(u,`@plugin(${s.name},'${i}')`)}))}applyErrorDecoration(e){var r;let t=(r=e.constructor.prototype.errorConfig)!=null?r:[];for(let{method:s}of t)this.errorHandlers.push(ue(e[s],i=>{i instanceof he&&i.silence()}))}applyCatchErrorDecoration(e){var r;let t=(r=e.constructor.prototype.catchErrorConfig)!=null?r:[];for(let{method:s}of t)e[s]=ue(e[s],i=>{this.traceError(i,"@catchError")})}traceError(e,t){return new he(e,r=>this.reportError(r),t)}reportError(e){for(let t of this.errorHandlers)t(e.message,[...e.trace])}};o(ze,"Core");var Se=ze;var ke=[],Ne=ke;var m=o(n=>{let e=n.prototype,t=Object.getOwnPropertyNames(e).filter(r=>{var s;return r!=="constructor"&&((s=Object.getOwnPropertyDescriptor(e,r))==null?void 0:s.value)instanceof Function});e.moduleConfig=t.map(r=>({method:r})),ke.push(n)},"moduleClass"),X=o(n=>e=>{},"attachModule"),O=o((n,e)=>{var t;n.executeConfig=(t=n.executeConfig)!=null?t:[],n.executeConfig.push({method:e})},"executeMethod"),T=o((n,e)=>(t,r)=>{var s;t.pluginConfig=(s=t.pluginConfig)!=null?s:[],t.pluginConfig.push({PluggableClass:n,category:e,method:r})},"pluginMethod"),Re=o((n,e)=>{var t;n.catchErrorConfig=(t=n.catchErrorConfig)!=null?t:[],n.catchErrorConfig.push({method:e})},"catchErrorMethod"),je=o((n,e)=>{var t;n.errorConfig=(t=n.errorConfig)!=null?t:[],n.errorConfig.push({method:e})},"errorMethod");var h=class{constructor(){l(this,"timeFunction",new S.Map)}window(){return window}document(){return this.window().document}pageUrl(){var e,t;return(t=(e=this.window().location)==null?void 0:e.href)!=null?t:""}hostname(){return new URL(this.pageUrl()).hostname}time(){return this.timeFunction.conjure(this.core.session,()=>{let e=this.window(),t=!1;try{t=typeof e.performance.now()=="number"}catch(r){}return t?()=>Math.floor(e.performance.now()):()=>e.Date.now()})()}sendBeacon(e){try{let t=this.window().navigator;typeof(t==null?void 0:t.sendBeacon)=="function"?t.sendBeacon(e):new Image().src=e}catch(t){}}};o(h,"Env"),h=d([m],h);var U=class{getPubAds(){var t,r;let e=this.core.get(h).window();try{return(r=(t=e.googletag)==null?void 0:t.pubads)==null?void 0:r.call(t)}catch(s){return}}onPubAdsReady(e){var s,i,a,u;let t=this.core.get(h).window();t.googletag=(s=t.googletag)!=null?s:{},t.googletag.cmd=(i=t.googletag.cmd)!=null?i:[];let r=this.getPubAds();if(r!=null)e(r);else try{(u=(a=t.googletag.cmd)==null?void 0:a.push)==null||u.call(a,()=>{r=this.getPubAds(),r!=null&&e(r)})}catch(p){}}};o(U,"GoogletagPubAds"),U=d([m],U);var Te=o((n,e)=>(e==null?void 0:e.structuredClone)!=null?e.structuredClone(n):JSON.parse(JSON.stringify(n)),"deepClone");var nt=o(n=>{if(typeof n!="object"||n===null||Array.isArray(n))return!1;let e=n;return e.gdprApplies!==void 0&&typeof e.gdprApplies!="boolean"&&e.gdprApplies!==0&&e.gdprApplies!==1||e.eventStatus!=="tcloaded"&&e.eventStatus!=="cmpuishown"&&e.eventStatus!=="useractioncomplete"&&e.eventStatus!==void 0||e.tcString!==void 0&&typeof e.tcString!="string"?!1:e.gdprApplies===!1||e.gdprApplies===0||e.gdprApplies===void 0?!(e.tcString!==void 0||e.purpose!==void 0||e.vendor!==void 0||e.publisher!==void 0):!(typeof e.tcString!="string"||!jt(e.purpose)||!Qt(e.vendor)||!Gt(e.publisher))},"isValidTCData"),jt=o(n=>{if(typeof n!="object"||n===null)return!1;let e=n;return be(e.consents)&&be(e.legitimateInterests)},"isValidPurposeObject"),Qt=o(n=>{if(typeof n!="object"||n===null)return!1;let e=n;return be(e.consents)&&be(e.legitimateInterests)},"isValidVendorObject"),Gt=o(n=>{if(typeof n!="object"||n===null||n===void 0)return!1;let e=n;return!(e.restrictions!==void 0&&!Vt(e.restrictions))},"isValidPublisherObject"),be=o(n=>typeof n!="object"||n===null?!1:Object.entries(n).every(([e,t])=>{let r=parseInt(e,10);return!isNaN(r)&&(typeof t=="boolean"||t===void 0)}),"isRecordOfBooleansOrUndefined"),Vt=o(n=>typeof n!="object"||n===null?!1:Object.entries(n).every(([e,t])=>{let r=parseInt(e,10);return isNaN(r)||typeof t!="object"||t===null?!1:Object.entries(t).every(([s,i])=>{let a=parseInt(s,10),u=Number(i);return!isNaN(a)&&!isNaN(u)&&u>=0&&u<=3})}),"isValidPublisherRestrictions");var ye=126,ot=2,Bt=20,Kt=250;var H=class{constructor(){l(this,"firstResultPromise",new S.Map);l(this,"tcState",new S.Map);l(this,"declaredPurposes",new S.Map);l(this,"plugins",{signalReady:o(()=>[],"signalReady")})}getTcState(){return _({},this.tcState.conjure(this.core.session,()=>({apiAvailable:this._getCmpApi()!=null,applies:"",signalSettled:!1,tcString:""})))}getDeclaredPurposes(){return _({},this.declaredPurposes.conjure(this.core.session,()=>({purposes:[],flexiblePurposes:[2,7,8,10],legIntPurposes:[2,7,8,10]})))}getTcStateAsync(){return y(this,null,function*(){return yield this._getTcStatePromise(),this.getTcState()})}apiAvailable(){return this.getTcState().apiAvailable}applies(){let e=this.getTcState();return e.applies==="1"?!0:e.applies==="0"?!1:void 0}hasLegalBasis(e){let{applies:t,tcString:r,purpose:s,vendor:i}=this.getTcState();if(t!=="1"||r===""||s==null||i==null)return;let a=this._getActiveLegalBasis(e);if(a!=null)return a===0?!1:a===1?s.consents[e]===!0&&i.consent===!0:s.legitimateInterests[e]===!0&&i.legitimateInterest===!0}_getTcStatePromise(){return y(this,null,function*(){return this.firstResultPromise.conjure(this.core.session,()=>this._monitorTcState()).catch(()=>{})})}_monitorTcState(){return y(this,null,function*(){let e=yield this._getCmpApiAsync();if(e!=null){try{e("getVendorList",ot,(t,r)=>{var s;if(r===!0&&((s=t==null?void 0:t.vendors)==null?void 0:s[ye])!=null){let{purposes:i,flexiblePurposes:a,legIntPurposes:u}=t.vendors[ye];this._setDeclaredPurposes({purposes:i,flexiblePurposes:a,legIntPurposes:u})}})}catch(t){}yield new Promise(t=>{try{e("addEventListener",ot,(r,s)=>{s===!0&&nt(r)&&this._setTcState(r),t()})}catch(r){t()}})}})}_getCmpApiAsync(){return y(this,null,function*(){let e=this.core.get(h).window(),t=this._getCmpApi(),r=0;for(;t==null&&r<Bt;)r++,yield new Promise(s=>e.setTimeout(s,Kt)),t=this._getCmpApi();return t})}_getCmpApi(){let t=this.core.get(h).window().__tcfapi;if(typeof t=="function")return t}_setDeclaredPurposes(e){this.declaredPurposes.set(this.core.session,{purposes:[...e.purposes],flexiblePurposes:[...e.flexiblePurposes],legIntPurposes:[...e.legIntPurposes]})}_setTcState(e){let t=this._convertTcDataToTcState(e);this.tcState.set(this.core.session,t),t.signalSettled&&this.plugins.signalReady()}_convertTcDataToTcState(e){let t=e.gdprApplies==null?"":e.gdprApplies===!0||e.gdprApplies===1?"1":"0",r=e.eventStatus==="tcloaded"||e.eventStatus==="useractioncomplete"||t==="0",s={apiAvailable:!0,applies:t,signalSettled:r,tcString:""};return!(e.gdprApplies===!0||e.gdprApplies===1)||e.tcString===""?s:ee(_({},s),{tcString:e.tcString,purpose:Te(e.purpose),vendor:{legitimateInterest:e.vendor.legitimateInterests[ye]===!0,consent:e.vendor.consents[ye]===!0},publisherRestrictions:this._extractDvRestrictions(e.publisher.restrictions)})}_extractDvRestrictions(e){let t={};for(let[r,s]of Object.entries(e)){let i=s[ye];i!=null&&(t[Number(r)]=i)}return t}_getActiveLegalBasis(e){let t=this.getDeclaredPurposes(),{publisherRestrictions:r}=this.getTcState();if(r==null)return;let s=r[e];if(s===0)return 0;let i=t.legIntPurposes.includes(e)?2:t.purposes.includes(e)?1:0;if(i===0)return 0;if(s===1||s===2){let a=s===1?1:2,u=t.flexiblePurposes.includes(e);return i===a||u?a:0}return i}};o(H,"Gdpr"),d([O],H.prototype,"_getTcStatePromise",1),H=d([m],H);var $t=[[/((\?)|&)(?:amp_lite|fr=operanews)/g,"$2"],[/(^https?:\/\/)(www\.)/g,"$1"],[/(((\?)|&|%3F|%26|;)(?:utm_campaign|utm_source|utm_content|utm_term|utm_viral|utm_medium|utm_identifier|utm_key|fb_source|referrer|referer|ref|rand|rnd|randid|\.?rand|\.?partner|cb|count|adid|session|sessionid|session_redirect|param\d|userinfo|uid|refresh|ocid|ncid|clickenc|fbclid|amp_js_v|amp_gsa|ns_source|ns_campaign|ns_mchanel|ns_mchannel|ns_linkname|ns_fee|src|ex_cid|usqp|source|xid|trkid|utm_social-type|mbid|utm_brand|__twitter_impression|utm_referrer|CMP|cmp|_cmp|cq_cmp)=[^&]*)/g,"$3"],[/[/.]amp(?:\/[?&]*)?$/g,""],[/((\?)|&)(?:outputType|isFollow|suppressMediaBar|cid|ICID|icid|bdk|wtu_id_h|utm_placement|intcmp|_native_ads|traffic_source|entry|\.tsrc|autoplay|autostart|dc_data|influencer|pubdate|utm_hp_ref|redirect|service|refresh_ce|refresh_cens|xcmg|target_id|_amp)=[^&]*/g,"$2"],[/(\?|&)(?:amp)(?:&|$|=[^&]*)/g,"$1"]],Wt=[[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""],[/(?:\/|\/\?|\?|&|\/\$0|#[\s\S]*)+$/g,""]],it=o((n,e)=>{for(let[t,r]of n)e=e.replace(t,r);return e},"replaceByRules"),at=o(n=>{let e=it($t,n);return it(Wt,e)},"normalizeUrl");var lt=o(n=>n.split("?",1)[0].split("#",1)[0],"stripUrlQuery");var F=class{getTagInfo(){return typeof CTX=="undefined"||typeof CMP=="undefined"?null:{ctx:CTX,cmp:CMP}}getShortCommitId(){return"fdd651c"}getBuildTimestamp(){return 1769767240411}getAuthToken(){return typeof AUTH_TOKEN=="undefined"?"default":AUTH_TOKEN}};o(F,"DefinedVariables"),F=d([m],F);var ut=o((n,e)=>{try{let t=new URLSearchParams(n),r=t.get("ctx"),s=t.get("cmp");if(r!=null&&s!=null)return{ctx:r,cmp:s,prefetch:e,legacy:!0}}catch(t){}return null},"parseInfo"),dt=o(n=>{var e;return n.pathname!=="/signals/pub.js"?null:(e=ut(n.search,!0))!=null?e:ut(n.hash.substring(1).split("?")[0],!1)},"parseLegacyPagetagUrl");var Xt=1e3,Ht=/^\/dvtag\/([^/]+)\/([^/]+)\/pub\.js$/,x=class{constructor(){l(this,"visit");l(this,"tagInfo");l(this,"currentScriptBaseUrlCache");l(this,"plugins",{newVisit:o(e=>[],"newVisit"),overrideTagInfo:o(e=>[],"overrideTagInfo")});l(this,"_normalizeUrl",at)}_initialize(){this.getTagInfo(),this.getCurrentScriptBaseUrl(),this.updateVisit(!1),this.plugins.newVisit(this.visit),this._installNavigationListener()}getTagInfo(){var e;if(this.tagInfo==null){try{this.tagInfo=this._parseTagInfo()}catch(r){}(e=this.tagInfo)!=null||(this.tagInfo={ctx:"unknown",cmp:"unknown"});let t=this.plugins.overrideTagInfo(this.tagInfo);t.length>0&&(this.tagInfo=_(_({},this.tagInfo),t[0]))}return this.tagInfo}_parseTagInfo(){let e=this.core.get(F).getTagInfo();if(e!=null)return e;let t=this._getCurrentScriptSrc();if(t==null)return null;let r=new URL(t,"https://pub.doubleverify.com"),s=r.pathname,i=Ht.exec(s);if(i!=null){let[,a,u]=i;return{ctx:a,cmp:u}}return dt(r)}_getCurrentScriptSrc(){var e,t;return(t=(e=this.core.get(h).window().document.currentScript)==null?void 0:e.getAttribute("src"))!=null?t:null}getCurrentScriptBaseUrl(){if(this.currentScriptBaseUrlCache!==void 0)return this.currentScriptBaseUrlCache;let e=this._getCurrentScriptSrc();if(e==null)return null;try{e.startsWith("//")&&(e="https:"+e);let{origin:t,pathname:r}=new URL(e),s=r.split("/").slice(0,-1).join("/");return this.currentScriptBaseUrlCache=`${t}${s}/`,this.currentScriptBaseUrlCache}catch(t){return null}}updateVisit(e=!0){var r,s;let t=this.getStrippedPageUrl();if(this.visit==null||this.visit.strippedUrl!==t){let i=Y();this.visit={strippedUrl:t,normalizedUrl:this._normalizeUrl(this.core.get(h).window().location.href),uuid:i,sessionUuid:(s=(r=this.visit)==null?void 0:r.sessionUuid)!=null?s:i},e&&this.plugins.newVisit(this.visit)}return this.visit}getVisit(){var e;return(e=this.visit)!=null?e:this.updateVisit(!1)}getStrippedPageUrl(){return lt(this.core.get(h).window().location.href)}getNormalizedPageUrl(){return this.getVisit().normalizedUrl}getVisitUuid(){return this.getVisit().uuid}getSessionUuid(){return this.getVisit().sessionUuid}_installNavigationListener(){var r;let e=this.core.get(h).window(),t=o(()=>this.updateVisit(!0),"cb");((r=e.navigation)==null?void 0:r.addEventListener)!=null?e.navigation.addEventListener("navigatesuccess",t):setInterval(t,Xt)}};o(x,"Context"),d([O],x.prototype,"_initialize",1),x=d([m],x);var ie=o(()=>(...n)=>[],"apiPlugin"),D=class{constructor(){l(this,"plugins",{queueAdRequest:ie(),defineSlot:ie(),adRendered:ie(),adRemoved:ie(),getTargeting:ie(),addEventListener:o((e,t)=>[],"addEventListener"),removeEventListener:o((e,t)=>[],"removeEventListener"),toggleDebugMode:ie(),_debugScriptLoaded:ie()})}_initialize(){var r;let e=this.core.get(h).window(),t=(r=e.dvtag)!=null?r:{};e.dvtag=t,t.queueAdRequest=this.queueAdRequest,t.defineSlot=this.defineSlot,t.adRendered=this.adRendered,t.adRemoved=this.adRemoved,t.getTargeting=this.getTargeting,t.addEventListener=this.addEventListener,t.removeEventListener=this.removeEventListener,t.toggleDebugMode=this.toggleDebugMode,t._debugScriptLoaded=this._debugScriptLoaded}queueAdRequest(...e){this.plugins.queueAdRequest(...e)}defineSlot(...e){this.plugins.defineSlot(...e)}adRendered(...e){this.plugins.adRendered(...e)}adRemoved(...e){this.plugins.adRemoved(...e)}getTargeting(...e){var t;return(t=this.plugins.getTargeting(...e)[0])!=null?t:{}}addEventListener(e,t){this.plugins.addEventListener(e,t)}removeEventListener(e,t){this.plugins.removeEventListener(e,t)}toggleDebugMode(...e){this.plugins.toggleDebugMode(...e)}_debugScriptLoaded(...e){this.plugins._debugScriptLoaded(...e)}};o(D,"Api"),d([O],D.prototype,"_initialize",1),D=d([m],D);var Qe=class Qe{constructor(){l(this,"pending",[]);l(this,"flushing",!1)}push(e){this.pending.push(e),this.flush()}flush(){return y(this,null,function*(){var t;if(this.flushing)return;this.flushing=!0;let e=this.pending.shift();for(;e!=null;){try{yield e.promise}catch(r){}try{(t=e.callback)==null||t.call(e)}catch(r){}e=this.pending.shift()}this.flushing=!1})}};o(Qe,"AsyncQueue");var Ce=Qe;var E=class{constructor(){l(this,"plugins",{adRequestQueued:o(e=>[],"adRequestQueued"),adRequestTimedOut:o(e=>[],"adRequestTimedOut"),adRequestBeforeRelease:o(e=>[],"adRequestBeforeRelease"),adRequestCompleted:o(e=>[],"adRequestCompleted")});l(this,"queue",new Ce);l(this,"adRequestCounter",0)}_queueAdRequest(e={}){var i,a;let t={index:this.adRequestCounter++,status:"queued",timeoutValue:(i=e.timeout)!=null?i:0,onDvtagReadyCalled:(a=e.timestamp)!=null?a:0,waitingStarted:new Date().getTime(),internal:e.internal};this.core.get(x).updateVisit(),this.plugins.adRequestQueued(t);let r=e.callback;r===void 0?e.callback=()=>{}:r===null?t.status="tag-timeout":e.callback=()=>{t.status="queue-timeout",t.callbackCalled=new Date().getTime(),e.callback=null,this.plugins.adRequestTimedOut(t);try{r()}catch(u){}};let s=o(()=>{if(e.callback!=null){e.callback=null,t.status="success",t.callbackCalled=new Date().getTime(),this.plugins.adRequestBeforeRelease(t);try{r==null||r()}catch(u){}}else this.plugins.adRequestBeforeRelease(t);t.waitingEnded=new Date().getTime(),this.plugins.adRequestCompleted(t)},"onAsyncOperationsCompleted");this.queue.push({callback:s,adRequest:t})}delayAdRequests(e){this.queue.push({promise:e})}};o(E,"AdRequestQueue"),d([T(D,"queueAdRequest")],E.prototype,"_queueAdRequest",1),E=d([m],E);var er="https://vtrk.doubleverify.com",ct="dvtag",Ge=1,b=class{constructor(){l(this,"sharedDataPoints");l(this,"legacyAdRequestsSeen",0)}_onAdRequestCompleted(e){if(e.internal&&(this.legacyAdRequestsSeen+=1),e.index>0&&!(e.internal&&this.legacyAdRequestsSeen===1))return;let{timeoutValue:t,onDvtagReadyCalled:r,callbackCalled:s}=e,i=s!=null?s-r:t,{applies:a,apiAvailable:u}=this.core.get(H).getTcState();this.fireEvent(e.index===0?"ad-request":"legacy-ad-request",{cd111:e.status,cm106:e.index,cm107:i,cd112:e.internal?"legacy":"modern",cd115:a,cm116:u?1:0},{sampleInterval:Ge})}_getSharedDataPoints(){if(this.sharedDataPoints==null){let e=this.core.get(x),t=this.core.get(F),r=this.core.get(h),{ctx:s,cmp:i,legacy:a}=e.getTagInfo(),u=r.hostname(),p=e.getSessionUuid(),f=t.getShortCommitId(),R=e.getCurrentScriptBaseUrl(),C;if(R!=null){let z=new URL(R);z.hostname.endsWith(".doubleverify.com")?C="com":z.hostname.endsWith(".dv.tech")&&(C="tech")}this.sharedDataPoints={cd102:f,cd103:"",cd107:p,cd109:a?"legacy":"modern",cd200:C,cd108:"",cd105:s,cd106:i,cd104:u}}return this.sharedDataPoints}fireEvent(e,t,{sampleInterval:r=1,trackerUuid:s=Y(),spoofWrapperId:i=!1}={}){if(Math.random()>=1/r)return;t=ee(_(_({},t),this._getSharedDataPoints()),{cd101:e,cm101:r});let a=ee(_({ec:ct,ea:t.cd101,ctx:i?ct:t.cd105,cmp:t.cd106},t),{cid:s,t:"event",v:1,z:s,cd160:s}),u=new URL(er);for(let[p,f]of Object.entries(a))f!=null&&u.searchParams.set(p,`${f}`);this.core.get(h).sendBeacon(u.href)}};o(b,"Events"),d([T(E,"adRequestCompleted")],b.prototype,"_onAdRequestCompleted",1),b=d([m],b);var Ae=["BSC","ABS","CCT","CBS"],Ve=["IDS"],Ee=["VLP","TVP"],Be=[...Ae,...Ve,...Ee],Ie=[...Ae,...Ve,...Ee].filter(n=>n!=="CCT"),Ke=o(n=>Be.includes(n.toUpperCase()),"isSignal"),De=o(n=>Ee.includes(n.toUpperCase()),"isSlotSignal"),gt=o(n=>Ve.includes(n.toUpperCase()),"isUserSignal"),pt=o(n=>Ae.includes(n.toUpperCase()),"isPageSignal"),mt=o(n=>n.map(e=>e.toUpperCase()).filter(Ke),"asSignals");var k=class{constructor(){l(this,"pq",null)}getPq(){return this.pq==null&&(this.pq=this._initialize()),this.pq}getPts(){let e=this.getPq();return e.PTS==null&&(e.PTS={}),e.PTS}setApi(e){let t=this.getPq();t!=null&&(t.init=()=>{},t.loadSignals=e.loadSignals,t.loadSignalsForSlots=e.loadSignalsForSlots,t.getTargeting=e.getTargeting)}_pushToDvtagCmd(...e){var r,s;let t=this.core.get(h).window();t.dvtag=(r=t.dvtag)!=null?r:{},t.dvtag.cmd=(s=t.dvtag.cmd)!=null?s:[],t.dvtag.cmd.push(...e)}_initialize(){var s,i;let e=this.core.get(h).window();e.PQ=(s=e.PQ)!=null?s:{};let t=e.PQ;if(t.loaded)return{cmd:[],PTS:{}};t.loaded=!0,t.PTS=(i=t.PTS)!=null?i:{};let r=t.cmd;return t.cmd={push:o(a=>this._pushToDvtagCmd(a),"push")},Array.isArray(r)&&this._pushToDvtagCmd(...r),t}};o(k,"LegacyPq"),k=d([m],k);var pe=o(n=>{if(n==null)return[];let e=ft(n);return e!=null?[e]:Array.isArray(n)?n.map(ft).filter(t=>t!=null):[]},"parseSlotSizes"),ft=o(n=>{if(n==null)return null;if(typeof n=="string")return{label:n};if(Array.isArray(n)){if(n.length===1&&typeof n[0]=="string")return{label:n[0]};if(n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number")return{width:n[0],height:n[1]}}if(typeof n=="object"){let{label:e,width:t,height:r}=n;if(typeof t=="number"&&typeof r=="number")return{width:t,height:r};if(typeof e=="string")return{label:e}}return null},"parseSlotSize");var tr=/^(\d+)x(\d+)$/,ht=o(n=>n==="all"?[]:n.split(",").map(e=>{let t=e.match(tr);return t==null?{label:e}:{width:parseInt(t[1],10),height:parseInt(t[2],10)}}),"stringToSlotSizes"),xe=o(n=>n.length===0?"all":n.map(({width:e,height:t,label:r})=>r!=null?r:`${e}x${t}`).join(","),"slotSizesToString"),St=o(n=>n==null?"":n.length>0&&n.every(({label:r})=>r==null)?xe(n):"","slotSizesToStringIfSpecific");var Rt=o(n=>{var r,s,i;let e=Y(),t={id:(s=(r=n.adUnitPath)!=null?r:n.invCode)!=null?s:n.tagId,sizes:pe(ht((i=n.sizes)!=null?i:"all")),position:n.position};return{elementId:e,adUnit:t}},"parseLegacyAdUnit");var Tt=o(n=>{try{return n.getSizes()}catch(e){return[]}},"getGptSlotSizesSafe");var rr="dvp_spos",yt=o(n=>{try{return{elementId:n.getSlotElementId(),adUnit:{id:n.getAdUnitPath(),sizes:pe(Tt(n)),position:n.getTargeting(rr)[0]}}}catch(e){return null}},"parseLegacyGptSlot");var At=o((n,e)=>{var s;let t=(s=n.IDS)==null?void 0:s[0];if(t==null)return;let r=parseInt(t);isNaN(r)||(e.IDS=r)},"setUserTargetingOnPts"),Et=o((n,e)=>{for(let t of Ae)n[t]!=null&&(e[t]=n[t])},"setPageTargetingOnPts"),xt=o((n,e,t)=>{var u,p,f,R,C,z;let{adUnit:r}=n;if((r==null?void 0:r.id)==null)return;let s=r.id,i=xe((u=r.sizes)!=null?u:[]),a=r.position;for(let I of Ee){let W=e[I];W!=null&&((p=t[I])!=null||(t[I]={}),(R=(f=t[I])[s])!=null||(f[s]={}),t[I][s][i]=W[0],a!=null&&((z=(C=t[I][s])[a])!=null||(C[a]={}),t[I][s][a][i]=W[0]))}},"setSlotTargetingOnPts");var We=o(n=>[...new Set(n.filter(Ke).map(e=>e.toLowerCase()))],"getGreenlightSignal");var me="qt_loaded",vt="pts_pid",_t="pts_sid";var te=class{autoInsertPageId(){let t=this.core.get(x).getVisitUuid();this.core.get(U).onPubAdsReady(r=>{r.setTargeting(vt,t)})}autoInsertGlobalTargeting(e){this.core.get(U).onPubAdsReady(t=>{for(let[r,s]of Object.entries(e))t.setTargeting(r,s);t.setTargeting(me,We([...t.getTargeting(me),...Object.keys(e)]))})}autoInsertSlotId(e){this.core.get(U).onPubAdsReady(t=>{let r=t.getSlots().find(s=>s.getSlotElementId()===e.elementId);r!=null&&r.setTargeting(_t,e.uuid)})}autoInsertSlotTargeting(e,t){this.core.get(U).onPubAdsReady(r=>{let s=r.getSlots().find(i=>i.getSlotElementId()===e.elementId);if(s!=null){for(let[i,a]of Object.entries(t))s.setTargeting(i,a);s.setTargeting(me,We([...r.getTargeting(me),...s.getTargeting(me),...Object.keys(t)]))}})}};o(te,"LegacyModeAutoInsertion"),te=d([m],te);var j=class{constructor(){l(this,"cache",new S.Map)}_performFetchJson(e,t){return y(this,null,function*(){let r=this.core.get(h).window().fetch,s=e;if(t!=null&&t.authToken){let i=this.core.get(F).getAuthToken(),a=new URL(e);a.searchParams.set("token",i),s=a.href}try{return yield r(s).then(i=>i.json())}catch(i){return null}})}fetchJson(e,t){return y(this,null,function*(){let r=this.cache.summon(this.core.session,{}),s=r[e];return s==null&&(s=this._performFetchJson(e,t),r[e]=s),yield s})}};o(j,"Fetch"),j=d([m],j);var Mt=o(n=>n==null?"":`@${n}`,"getPositionSuffix");var sr="https://pub.doubleverify.com/dvtag/signals/",Q=class{_getBaseUrl(e){let t=this.core.get(x),{ctx:r,cmp:s}=t.getTagInfo(),i=t.getNormalizedPageUrl();try{i=new URL(i).origin}catch(u){}let a=new URL(e,sr);return a.searchParams.set("ctx",r),a.searchParams.set("cmp",s),a.searchParams.set("url",i),a}getUserTargetingUrl(e){let t=this._getBaseUrl("ids/pub.json");return e.includes("IDS")&&t.searchParams.set("ids","1"),t.href}getPageTargetingUrl(e,t){let r=this._getBaseUrl("bsc/pub.json");return r.searchParams.set("url",t),e.includes("BSC")&&r.searchParams.set("bsc","1"),e.includes("ABS")&&r.searchParams.set("abs","1"),e.includes("CBS")&&r.searchParams.set("cbs","1"),e.includes("CCT")&&r.searchParams.set("cct","1"),r.href}getSlotTargetingUrl(e,t){var i;let r=this._getBaseUrl("vlp/pub.json");e.includes("VLP")&&r.searchParams.set("vlp","1"),e.includes("TVP")&&r.searchParams.set("tvp","1");let s=0;for(let a of t){let{id:u,position:p,sizes:f}=(i=a.adUnit)!=null?i:{},R=u+Mt(p);r.searchParams.set(`slot-${s++}-${R}`,St(f))}return r.href}};o(Q,"SignalsUrlBuilder"),Q=d([m],Q);var re=class{_getUserTargeting(e){return y(this,null,function*(){if(!e.some(gt))return{};let t=this.core.get(Q).getUserTargetingUrl(e),r=yield this.core.get(j).fetchJson(t,{authToken:!0});return r instanceof Object?r:{}})}_getPageTargeting(e){return y(this,null,function*(){if(!e.some(pt))return{};let t=this.core.get(x).getNormalizedPageUrl(),r=this.core.get(Q).getPageTargetingUrl(e,t),s=yield this.core.get(j).fetchJson(r,{authToken:!0});return s instanceof Object?s:{}})}_getSlotTargeting(e,t){return y(this,null,function*(){if(!e.some(De)||t.length===0)return new Array(t.length).fill({});let r=this.core.get(Q).getSlotTargetingUrl(e,t),s=yield this.core.get(j).fetchJson(r,{authToken:!0});return s instanceof Array?s.map(i=>Object.fromEntries(Object.entries(i).map(([a,u])=>[a,[u[0]]]))):new Array(t.length).fill({})})}getTargeting(e,t){return y(this,null,function*(){let[r,s,i]=yield Promise.all([this._getUserTargeting(e),this._getPageTargeting(e),this._getSlotTargeting(e,t)]);return{userTargeting:r,pageTargeting:s,slotTargeting:i}})}};o(re,"LegacyModeFetchTargeting"),re=d([m],re);var nr={SignalsIds:"IDS",SignalsBsc:"BSC",SignalsAbs:"ABS",SignalsVlp:"VLP",SignalsTvp:"TVP"},or="GptSignals",G=class{constructor(){l(this,"validConfigFound");l(this,"enabledSignals");l(this,"autoInsertionEnabled")}isValidConfigFound(){return this._initialize(),this.validConfigFound}isSignalEnabled(e){return this._initialize(),e!=null&&this.enabledSignals.includes(e)}isAutoInsertionEnabled(){return this._initialize(),this.autoInsertionEnabled}_initialize(){if(this.validConfigFound!=null)return;let e;try{e=this._getEntryModules()}catch(t){this.validConfigFound=!0,this.enabledSignals=Be,this.autoInsertionEnabled=!0;return}if(e==null){this.validConfigFound=!1,this.enabledSignals=[],this.autoInsertionEnabled=!1;return}this.validConfigFound=!0,this.enabledSignals=e.map(t=>nr[t]).filter(t=>t!=null),this.autoInsertionEnabled=e.includes(or)}_getEntryModules(){let{cmp:e}=this.core.get(x).getTagInfo(),t=btoa(e),{modules:r,configs:s}=c,i=s[t];return i==null?null:i.map(a=>r[a])}};o(G,"TagConfig"),G=d([m],G);var Nt=o((n,e)=>{var i,a,u,p;let t=[],r=[],s=[];if(e.VLP==null)return{newSlots:n,existingSlots:r,existingTargeting:s};for(let f of n){let{id:R,sizes:C}=f.adUnit,z=xe(C),I=(a=(i=e.VLP)==null?void 0:i[R])==null?void 0:a[z];if(I==null){t.push(f);continue}r.push(f);let W=(p=(u=e.TVP)==null?void 0:u[R])==null?void 0:p[z],le={};I!=null&&(le.VLP=[I]),W!=null&&(le.TVP=[W]),s.push(le)}return{newSlots:t,existingSlots:r,existingTargeting:s}},"processNewSlots");var V=class{performFetches(e,t,r,s){return y(this,null,function*(){let i=this.core.get(re),a=this.core.get(te),u=this.core.get(G),f=this.core.get(k).getPts();if(!u.isValidConfigFound())return Te(f);let R=mt(e).filter(N=>u.isSignalEnabled(N)).filter(N=>De(N)||f[N]==null),{newSlots:C,existingSlots:z,existingTargeting:I}=s?Nt(t,f):{newSlots:t,existingSlots:[],existingTargeting:[]};t=[...C,...z];let{userTargeting:W,pageTargeting:le,slotTargeting:Dt}=yield i.getTargeting(R,C),tt=[...Dt,...I];At(W,f),Et(le,f);for(let N=0;N<t.length;N++)xt(t[N],tt[N],f);if(r&&u.isAutoInsertionEnabled()){a.autoInsertPageId(),a.autoInsertGlobalTargeting(W),a.autoInsertGlobalTargeting(le);for(let N=0;N<t.length;N++)a.autoInsertSlotId(t[N]),a.autoInsertSlotTargeting(t[N],tt[N])}return Te(f,this.core.get(h).window())})}};o(V,"LegacyModePerformFetches"),V=d([m],V);var Xe="legacy-success",He="legacy-error",ae=class{constructor(){l(this,"_slotUuids",{});l(this,"_metricEventCount",0)}_initialize(){this.core.get(k).setApi({loadSignals:this.loadSignals.bind(this),loadSignalsForSlots:this.loadSignalsForSlots.bind(this),getTargeting:this.getTargeting.bind(this)})}loadSignals(e,t){return y(this,null,function*(){let r=this.core.get(V),s=this.core.get(G),i=this._prepareMetricEvent(),u=s.isSignalEnabled("VLP")||s.isSignalEnabled("TVP")?yield this._getSlots():[],p=!0,f=!1;try{yield r.performFetches(Ie,u,p,f);try{t==null||t()}catch(R){}i(Xe)}catch(R){try{t==null||t(R)}catch(C){}i(He)}})}loadSignalsForSlots(e,t,r){return y(this,null,function*(){let s=this.core.get(V),i=this._prepareMetricEvent(),a=e.map(f=>this._parseGptSlot(f)).filter(f=>f!=null),u=!0,p=!0;r=typeof t=="function"?t:r;try{yield s.performFetches(Ie,a,u,p);try{r==null||r()}catch(f){}i(Xe)}catch(f){try{r==null||r(f)}catch(R){}i(He)}})}getTargeting(e,t){return y(this,null,function*(){var p,f;let r=this.core.get(V),s=this._prepareMetricEvent(),i=(f=(p=e.adUnits)==null?void 0:p.map(R=>this._parseAdUnit(R)))!=null?f:[],a=!1,u=!1;try{let R=yield r.performFetches(Ie,i,a,u);try{t==null||t(void 0,R)}catch(C){}s(Xe)}catch(R){try{t==null||t(R)}catch(C){}s(He)}})}_getSlots(){return y(this,null,function*(){return(yield new Promise(t=>this.core.get(U).onPubAdsReady(r=>t(r.getSlots())))).map(t=>this._parseGptSlot(t)).filter(t=>t!=null)})}_getSlotUuid(e){let t=this._slotUuids[e];return t==null&&(t=Y(),this._slotUuids[e]=t),t}_parseGptSlot(e){let t=yt(e);if(t==null)return null;let{elementId:r,adUnit:s}=t;return{elementId:r,uuid:this._getSlotUuid(s.id),adUnit:ee(_({},s),{position:null})}}_parseAdUnit(e){let{adUnit:t}=Rt(e);return{elementId:t.id,uuid:this._getSlotUuid(t.id),adUnit:ee(_({},t),{position:null})}}_prepareMetricEvent(){let e=this.core.get(b);if(this._metricEventCount>0)return()=>{};this._metricEventCount++;let t=new Date().getTime();return r=>e.fireEvent("ad-request",{cd111:r,cm106:0,cm107:new Date().getTime()-t,cd112:"legacy"},{sampleInterval:Ge})}};o(ae,"LegacyMode"),d([O],ae.prototype,"_initialize",1),ae=d([m],ae);var A=class{constructor(){l(this,"plugins",{slotDiscovered:o((e,t)=>[],"slotDiscovered")});l(this,"slots",new S.Set)}getSlot(e,t){for(let r of this.slots)if(r.adServer===e&&r.elementId===t)return r}getSlots(e){let t=[...this.slots];return e==null?t:t.filter(r=>r.adServer===e)}createSlot(e,t,r,s,i,a){let u=this.getSlot(e,r);u!=null&&u.destroy();let p=S.Create({parent:this.core.session,adServer:e,elementId:r,adUnit:s,adServerConfig:i,uuid:Y(),creationTime:Date.now()});return this.slots.add(p),a==null||a(p),this.plugins.slotDiscovered(p,t),p}};o(A,"SlotStore"),A=d([m],A);var J=class{constructor(){l(this,"plugins",{adRemoved:o(e=>[],"adRemoved")})}_monitorAdRemoval(e){let t=this.core.get(h).document().getElementById(e.elementId);if(t==null)return;S.Create({parent:e,observer:new MutationObserver(s=>{let i=s.length,a=0,u=t.children.length;for(let p=s.length-1;p>=0;p--){let f=s[p];if(u===0){this.plugins.adRemoved(e);break}if(a===i-1)break;let R=f.removedNodes.length-f.addedNodes.length;u+=R,a++}})},({parent:s,observer:i})=>{i.disconnect(),this.plugins.adRemoved(s)}).observer.observe(t,{childList:!0})}};o(J,"AdRemoved"),d([T(A,"slotDiscovered")],J.prototype,"_monitorAdRemoval",1),J=d([m],J);var q=class{constructor(){l(this,"adEmpty",new S.Map);l(this,"adRequestInFlight",new S.Map);l(this,"nonEmptyAdResponses",new S.Map);l(this,"creatives",new S.Link);l(this,"plugins",{adRequested:o(e=>[],"adRequested"),adRequestedOrInferred:o(e=>[],"adRequestedOrInferred"),adRendered:o((e,t)=>[],"adRendered"),adRemoved:o(e=>[],"adRemoved")})}setAdRequested(e){this.adRequestInFlight.set(e,!0),this.plugins.adRequested(e),this.plugins.adRequestedOrInferred(e)}setAdRendered(e,t){this.adRequestInFlight.get(e)!==!0&&this.plugins.adRequestedOrInferred(e),this._setAdRemoved(e),this.adEmpty.set(e,!1),this.adRequestInFlight.set(e,!1),t!=null&&this.nonEmptyAdResponses.set(e,this.nonEmptyAdResponses.summon(e,0)+1);let r=null;if(t!=null){let s=this.core.get(h).time();r=S.Create(_({parent:e,timestamp:s},t)),this.creatives.get(e).add(r)}this.plugins.adRendered(e,r)}_setAdRemoved(e){if(this.adEmpty.get(e)===!1){this.adEmpty.set(e,!0);for(let t of this.creatives.get(e))t.destroy();this.plugins.adRemoved(e)}}getNonEmptyAdRenderedCount(e){return this.nonEmptyAdResponses.summon(e,0)}};o(q,"AdServerHub"),d([T(J,"adRemoved")],q.prototype,"_setAdRemoved",1),q=d([m],q);var ve=o((...n)=>{let e=[];for(let t of n)if(t!=null)for(let r of t)e.includes(r)||e.push(r);return e},"mergeUnique");var M=class{constructor(){l(this,"plugins",{getAdServerTargeting:o((e,t)=>[],"getAdServerTargeting"),setAdServerTargeting:o((e,t,r)=>[],"setAdServerTargeting")});l(this,"globalTargeting",{});l(this,"slotTargeting",new S.Map)}getGlobalTargeting(e){var t;return(t=this.globalTargeting[e])!=null?t:{}}_getSlotTargeting(e){return this.slotTargeting.summon(e,{})}_getTargetingKeys(e){return ve(Object.keys(this.getGlobalTargeting(e.adServer)),Object.keys(this._getSlotTargeting(e)))}_getTargetingValues(e,t){return ve(this.getGlobalTargeting(e.adServer)[t],this._getSlotTargeting(e)[t])}getTargeting(e){let t={};for(let r of this._getTargetingKeys(e))t[r]=this._getTargetingValues(e,r);return t}setSlotTargeting(e,t,r=!1){var a;let s=Object.keys(t),i=this._getSlotTargeting(e);for(let u of s)i[u]=ve(t[u],r?(a=this.slotTargeting.get(e))==null?void 0:a[u]:null);this.setAdServerTargeting(e,s)}setGlobalTargeting(e,t,r=!1){var i,a;let s=Object.keys(t);for(let u of e){for(let p of s)(a=(i=this.globalTargeting)[u])!=null||(i[u]={}),this.globalTargeting[u][p]=ve(t[p],r?this.globalTargeting[u][p]:null);for(let p of this.core.get(A).getSlots(u))this.setAdServerTargeting(p,s)}}getAdServerTargeting(e,t){var r;return(r=this.plugins.getAdServerTargeting(e,t).find(s=>s.length!==0))!=null?r:[]}setAdServerTargeting(e,t){t==null&&(t=this._getTargetingKeys(e));for(let r of t)this.plugins.setAdServerTargeting(e,r,this._getTargetingValues(e,r))}_onSlotDiscovered(e){this.setAdServerTargeting(e)}};o(M,"TargetingHub"),d([T(A,"slotDiscovered")],M.prototype,"_onSlotDiscovered",1),M=d([m],M);var bt=o(n=>{if(typeof n=="string"||Array.isArray(n)&&n.length===2&&n.every(e=>typeof e=="number"))return n;if(n!=null&&typeof n.width=="number"&&typeof n.height=="number")return[n.width,n.height]},"cleanSizeInput");var se=o(n=>{if(typeof n=="string")return n;if(typeof n=="number")return`${n}`},"cleanStringInput");var B=class{_defineSlot(e,t={}){if(typeof e!="string"||t==null||typeof t!="object")return;let r={id:se(t.id),network:se(t.network),sizes:t.sizes!=null?pe(t.sizes):void 0,position:se(t.position)};this.core.get(A).createSlot("custom",0,e,r)}_adRendered(e,t){if(typeof e!="string"||t==null||typeof t!="object")return;let r=this.core.get(A).getSlot("custom",e);if(r==null)return;let s={type:"display",advertiserId:se(t.advertiserId),campaignId:se(t.campaignId),creativeId:se(t.creativeId),lineItemId:se(t.lineItemId),renderedSize:bt(t.renderedSize)};this.core.get(q).setAdRendered(r,s)}_getTargeting(e){let t=this.core.get(M);if(typeof e!="string")return t.getGlobalTargeting("custom");let r=this.core.get(A).getSlot("custom",e);return r==null?t.getGlobalTargeting("custom"):t.getTargeting(r)}};o(B,"CustomAdServer"),d([T(D,"defineSlot")],B.prototype,"_defineSlot",1),d([T(D,"getTargeting")],B.prototype,"_getTargeting",1),B=d([m],B);var Z=class{constructor(){l(this,"restoreCount",0)}getRestoreCount(){return this.restoreCount}_restoreTargeting(){let e=this.core.get(M);for(let t of this.core.get(A).getSlots()){if(t.adServer==="custom"||t.adServer==="legacy-api")continue;let r=e.getTargeting(t),s=Object.keys(r)[0];s!=null&&e.getAdServerTargeting(t,s).length===0&&(e.setAdServerTargeting(t),this.restoreCount+=1)}}};o(Z,"TargetingRestorer"),d([T(E,"adRequestQueued")],Z.prototype,"_restoreTargeting",1),Z=d([m],Z);var Je=class Je{constructor(){l(this,"total",0);l(this,"dataPoints",0)}push(e){return this.total+=e,this.dataPoints+=1,this}get(){return this.total/this.dataPoints}getRounded(){return Math.round(this.get())}};o(Je,"Average");var _e=Je;var ne=o(()=>{var n,e,t;return Math.floor((t=(e=(n=window.performance)==null?void 0:n.now)==null?void 0:e.call(n))!=null?t:Date.now())},"perfNowOrDateNow");var Ze=class Ze{constructor(){l(this,"_firstQueuedAdRequest",1/0);l(this,"_lastQueuedAdRequest",-1/0);l(this,"_firstReleasedAdRequest",1/0);l(this,"_lastReleasedAdRequest",-1/0);l(this,"_lastReleasedAdRequestTime",null);l(this,"_hasBeenSuccessful",!1)}setAdRequestQueued(e){this._firstQueuedAdRequest=Math.min(this._firstQueuedAdRequest,e),this._lastQueuedAdRequest=Math.max(this._lastQueuedAdRequest,e)}setAdRequestReleased(e){this._firstReleasedAdRequest=Math.min(this._firstReleasedAdRequest,e),this._lastReleasedAdRequest=Math.max(this._lastReleasedAdRequest,e),this._lastReleasedAdRequestTime=ne()}getLastQueuedAdRequest(){return Number.isFinite(this._lastQueuedAdRequest)?this._lastQueuedAdRequest:null}getLastReleasedAdRequest(){return Number.isFinite(this._lastReleasedAdRequest)?this._lastReleasedAdRequest:null}getLastReleasedAdRequestTime(){return this._lastReleasedAdRequestTime}getLastSuccessfulAdRequest(){let e=Math.max(this._firstQueuedAdRequest,this._firstReleasedAdRequest),t=Math.min(this._lastQueuedAdRequest,this._lastReleasedAdRequest);return t<e?null:t}getPreviouslySuccessful(){return this._hasBeenSuccessful}markAdServerAdRequest(){this.getLastSuccessfulAdRequest()!=null&&(this._hasBeenSuccessful=!0),this._firstQueuedAdRequest=1/0,this._lastQueuedAdRequest=-1/0,this._firstReleasedAdRequest=1/0,this._lastReleasedAdRequest=-1/0,this._lastReleasedAdRequestTime=null}};o(Ze,"SlotAdRequestTracker");var Pe=Ze;var we=(a=>(a.UNKNOWN="UNKNOWN",a.SEEN="SEEN",a.NOT_READY="NOT_READY",a.POSSIBLE_TIMEOUT="POSSIBLE_TIMEOUT",a.PREV_READY="PREV_READY",a.READY="READY",a))(we||{});var et="dv_upt_slot_ready",lr=["https://securepubads.g.doubleclick.net/gampad/ads?","https://pagead2.googlesyndication.com/gampad/ads?"],ur=750,P=class{constructor(){l(this,"plugins",{onSlotRequested:o((()=>[]),"onSlotRequested"),onSlotRequestValidated:o((()=>[]),"onSlotRequestValidated")});l(this,"validateAdRequests",!1);l(this,"lastAdRequestQueued",null);l(this,"lastAdRequestReleased",null);l(this,"state",{adRequestTracker:new S.Map,triggered:new S.Map})}_getSlotAdRequestTracker(e){return this.state.adRequestTracker.conjure(e,()=>new Pe)}_onAdRequestQueued({index:e}){this.lastAdRequestQueued=e;for(let t of this.core.get(A).getSlots())this._getSlotAdRequestTracker(t).setAdRequestQueued(e),this.state.triggered.set(t,!1)}_onAdRequestBeforeRelease({index:e}){let t=this.core.get(M);this.lastAdRequestReleased=e;for(let r of this.core.get(A).getSlots())this._getSlotAdRequestTracker(r).setAdRequestReleased(e),this.validateAdRequests&&t.setSlotTargeting(r,{[et]:["1"]})}_onSlotDiscovered(e,t){t===0&&this.lastAdRequestQueued!=null&&this._getSlotAdRequestTracker(e).setAdRequestQueued(this.lastAdRequestQueued)}_determineReadyState(e){let t=this._getSlotAdRequestTracker(e),r=t.getLastQueuedAdRequest(),s=t.getLastSuccessfulAdRequest(),i=t.getPreviouslySuccessful();return s!=null?"READY":i?"PREV_READY":r!=null?"NOT_READY":Date.now()-e.creationTime>ur?"SEEN":"UNKNOWN"}getSlotReadyStateOnAdServerAdRequest(e){let t=this._determineReadyState(e);if(t==="READY"){if(this.state.triggered.get(e)===!0)return{readyState:"PREV_READY"};this.state.triggered.set(e,!0);let r=this._getSlotAdRequestTracker(e).getLastReleasedAdRequestTime();return{readyState:t,readyFor:ne()-r}}return{readyState:t}}_onSlotRequested(e){let{readyState:t,readyFor:r}=this.getSlotReadyStateOnAdServerAdRequest(e);this._getSlotAdRequestTracker(e).markAdServerAdRequest(),this.validateAdRequests&&this.core.get(M).setSlotTargeting(e,{[et]:["0"]}),this.plugins.onSlotRequested(e,t,r)}enableAdRequestValidation(){if(!this.validateAdRequests)try{let e=this._processResourceRequest.bind(this);new PerformanceObserver(r=>r.getEntries().forEach(e)).observe({type:"resource"}),this.validateAdRequests=!0}catch(e){}}_processResourceRequest(e){var t,r,s;try{if(lr.every(u=>!e.name.startsWith(u)))return;let a=(r=(t=new URL(e.name).searchParams.get("prev_scp"))==null?void 0:t.split("|"))!=null?r:[];for(let u of a){let f=((s=new URLSearchParams(u).get(et))==null?void 0:s[0])==="1";this.plugins.onSlotRequestValidated(f)}}catch(i){}}};o(P,"SlotReadinessTracker"),d([T(E,"adRequestQueued")],P.prototype,"_onAdRequestQueued",1),d([T(E,"adRequestBeforeRelease"),T(E,"adRequestTimedOut")],P.prototype,"_onAdRequestBeforeRelease",1),d([T(A,"slotDiscovered")],P.prototype,"_onSlotDiscovered",1),d([T(q,"adRequested")],P.prototype,"_onSlotRequested",1),P=d([m],P);var dr="implcheck",cr=1e-4,gr=5e3,pr=5,w=class{constructor(){l(this,"enabled",!1);l(this,"totalInternalAdRequestQueuedCount",0);l(this,"totalAdRequestsCompletedCount",0);l(this,"totalSlotsRequestedCount",0);l(this,"totalSlotsRequestedOkCount",0);l(this,"totalTimeoutCount",0);l(this,"trackersSent",0);l(this,"totalValidatedAdServerRequests",{ok:0,notOk:0});l(this,"lastOnDvtagReadyCall",NaN);l(this,"slotReqAvgTimeSinceCall",new _e);l(this,"slotReqAvgTimeSinceDone",new _e);l(this,"batch",null)}isDebugForceEnabled(){return!1}_initialize(){this.enabled=this.core.get(w).isDebugForceEnabled()||Math.random()<cr,this.enabled&&this.core.get(P).enableAdRequestValidation()}_onAdRequestQueued(e){this.enabled&&(this.lastOnDvtagReadyCall=ne(),e.internal&&(this.totalInternalAdRequestQueuedCount+=1))}_onAdRequestCompleted(e){this.enabled&&(this.totalAdRequestsCompletedCount+=1,(e.status==="tag-timeout"||e.status==="queue-timeout")&&(this.totalTimeoutCount+=1))}_onSlotRequested(e,t,r){if(!this.enabled)return;let s=this._getOrStartBatch();this.totalSlotsRequestedCount+=1,t==="READY"&&(this.totalSlotsRequestedOkCount+=1),s.slots[t].push(e.elementId),r!=null&&(this.slotReqAvgTimeSinceDone.push(r),this.slotReqAvgTimeSinceCall.push(ne()-this.lastOnDvtagReadyCall));let i=this._validateAdServerTargeting(e);i===1?s.targeting.extendedCount+=1:i===0&&(s.targeting.reducedCount+=1)}_validateAdServerTargeting(e){let t=this.core.get(M),r=2,s=t.getTargeting(e);for(let[i,a]of Object.entries(s)){let u=t.getAdServerTargeting(e,i);if(a.length>u.length||a.some(p=>!u.includes(p)))return 0;u.length>a.length&&(r=1)}return r}_onSlotRequestValidated(e){e?this.totalValidatedAdServerRequests.ok+=1:this.totalValidatedAdServerRequests.notOk+=1}_sendTracker(){let e=this.core.get(Z).getRestoreCount(),{slots:t,targeting:r,start:s}=this._getOrStartBatch(),i={cd110:t.READY.join(),cd111:t.PREV_READY.join(),cd112:t.SEEN.join(),cd113:t.NOT_READY.join(),cd114:t.UNKNOWN.join(),cd115:t.POSSIBLE_TIMEOUT.join(),cm106:this.trackersSent,cm107:s,cm109:this.totalTimeoutCount,cm110:this.slotReqAvgTimeSinceCall.getRounded(),cm111:this.slotReqAvgTimeSinceDone.getRounded(),cm112:this.totalSlotsRequestedOkCount,cm113:this.totalValidatedAdServerRequests.ok,cm114:this.totalValidatedAdServerRequests.notOk,cm115:e,cm116:this.totalAdRequestsCompletedCount,cm117:this.totalInternalAdRequestQueuedCount,cm118:this.totalSlotsRequestedCount,cm119:r.reducedCount,cm120:r.extendedCount};this.core.get(b).fireEvent(dr,i),this.batch=null,this.trackersSent+=1,this.trackersSent>=pr&&(this.enabled=!1)}_getOrStartBatch(){return this.batch==null&&(this.batch={start:ne(),slots:Object.fromEntries(Object.values(we).map(e=>[e,[]])),targeting:{extendedCount:0,reducedCount:0}},setTimeout(()=>this._sendTracker(),gr)),this.batch}};o(w,"ImplementationValidator"),d([O],w.prototype,"_initialize",1),d([T(E,"adRequestQueued")],w.prototype,"_onAdRequestQueued",1),d([T(E,"adRequestCompleted")],w.prototype,"_onAdRequestCompleted",1),d([T(P,"onSlotRequested")],w.prototype,"_onSlotRequested",1),d([T(P,"onSlotRequestValidated")],w.prototype,"_onSlotRequestValidated",1),w=d([m],w);var K=class{_initialize(){this._flushCommandBuffer()}_flushCommandBuffer(){return y(this,null,function*(){var i;yield Promise.resolve();let e=this.core.get(h).window(),t=(i=e.dvtag)!=null?i:{};e.dvtag=t,t.cmd instanceof Array||(t.cmd=[]);let r=t.cmd,s=r.length;t.cmd={push:o((...a)=>{for(let u of a)try{u()}catch(p){}return s+=a.length,s},"push")},t.cmd.push(...r)})}};o(K,"CommandBuffer"),d([O],K.prototype,"_initialize",1),d([Re],K.prototype,"_flushCommandBuffer",1),K=d([m],K);var Ct=10,$=class{constructor(){l(this,"errors",new S.Map)}_getErrors(){return this.errors.summon(this.core.session,[])}toSafeCallback(e){return(...t)=>this._callSafely(e,t)}_callSafely(e,t){return e(...t)}_handleError(e,t){let r=this._getErrors(),s=t.join("=>");if(r.unshift(`${e}: ${s}`),r.length>Ct){r.length=Ct;return}this.core.get(b).fireEvent("log",{cd111:"error",cd112:e,cd113:s})}};o($,"ErrorHandler"),d([Re],$.prototype,"_callSafely",1),d([je],$.prototype,"_handleError",1),$=d([m],$);var fe=class{};o(fe,"HouseHold"),fe=d([m,X(D),X(E),X(K),X(b),X($),X(B),X(w)],fe);var It=o(n=>{var e,t,r,s,i,a;try{let u={};for(let[p,f,R]of(t=(e=window.dvtag)==null?void 0:e._overrides)!=null?t:[])(r=u[p])!=null||(u[p]={}),(i=(s=u[p])[f])!=null||(s[f]=R);for(let p of n)for(let[f,R]of Object.entries((a=u[p.name])!=null?a:{}))p.prototype[f]=R}catch(u){}},"applyDebugOverrides");var mr=o(()=>{var n,e;((n=window.dvtag)==null?void 0:n._core)==null&&(It(Ne),window.dvtag=(e=window.dvtag)!=null?e:{},window.dvtag._core=new Se(Ne),window.dvtag._core.execute())},"main");try{mr()}catch(n){}})();
